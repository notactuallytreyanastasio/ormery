<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skinny Ecto Interactive Playground</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            flex: 1;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .tab:hover {
            background: #e8e9ea;
        }
        
        .tab.active {
            background: white;
            border-bottom-color: #667eea;
            color: #667eea;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .split-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .editor-container {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .editor-header {
            background: #2d2d2d;
            color: white;
            padding: 10px 15px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .code-editor {
            width: 100%;
            min-height: 400px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            border: none;
            background: #1e1e1e;
            color: #d4d4d4;
            resize: vertical;
        }
        
        .output-panel {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            min-height: 400px;
            white-space: pre-wrap;
            overflow-y: auto;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .query-builder {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
        }
        
        .qb-section {
            margin-bottom: 20px;
        }
        
        .qb-section h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .qb-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .qb-input, .qb-select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.95rem;
        }
        
        .qb-input {
            flex: 1;
        }
        
        .qb-select {
            min-width: 120px;
        }
        
        .where-clause {
            background: white;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #ddd;
            margin-bottom: 8px;
        }
        
        .add-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .add-btn:hover {
            background: #5568d3;
        }
        
        .remove-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 4px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
        }
        
        .generated-code {
            background: #2d2d2d;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-top: 15px;
            white-space: pre-wrap;
        }
        
        .examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .example-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .example-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .example-card h4 {
            color: #667eea;
            margin-bottom: 8px;
        }
        
        .example-card p {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .example-code {
            background: #2d2d2d;
            color: #d4d4d4;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
        }
        
        .success { color: #27ae60; }
        .error { color: #e74c3c; }
        
        .checkbox-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .checkbox-label:hover {
            background: #f0f0f0;
        }
        
        .checkbox-label input {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Skinny Ecto Interactive Playground</h1>
            <p>Build, Edit, and Run Queries in Real-Time</p>
        </header>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('code')">üíª Code Editor</button>
            <button class="tab" onclick="switchTab('builder')">üîß Query Builder</button>
            <button class="tab" onclick="switchTab('examples')">üìö Examples</button>
        </div>
        
        <!-- Code Editor Tab -->
        <div id="code-tab" class="tab-content active">
            <div class="controls">
                <button class="btn btn-primary" onclick="runCode()">‚ñ∂Ô∏è Run Code</button>
                <button class="btn btn-secondary" onclick="clearOutput()">üóëÔ∏è Clear Output</button>
                <button class="btn btn-secondary" onclick="resetCode()">‚Üª Reset</button>
            </div>
            
            <div class="split-view">
                <div class="editor-container">
                    <div class="editor-header">Code Editor (Edit Me!)</div>
                    <textarea id="code-editor" class="code-editor" spellcheck="false">// Define schema
let userFields = [
  field("name", "String", false, false),
  field("age", "Int", false, false),
  field("email", "String", false, true)
];
let userSchema = schema("users", userFields);

// Create store and add data
let store = new InMemoryStore();

store.insert("users", {
  name: "Alice",
  age: "25",
  email: "alice@example.com"
});

store.insert("users", {
  name: "Bob",
  age: "30",
  email: "bob@example.com"
});

store.insert("users", {
  name: "Charlie",
  age: "17",
  email: "charlie@example.com"
});

// Build a query!
let adults = new Query(userSchema, store)
  .where("age", ">=", "18")
  .select(["name", "age"])
  .orderBy("age", "desc")
  .all();

// Display results
print("Adults (age >= 18), sorted by age:");
for (let user of adults) {
  print("  " + user.describe());
}</textarea>
                </div>
                
                <div class="editor-container">
                    <div class="editor-header">Output</div>
                    <div id="output" class="output-panel">Click "Run Code" to execute...</div>
                </div>
            </div>
        </div>
        
        <!-- Query Builder Tab -->
        <div id="builder-tab" class="tab-content">
            <div class="query-builder">
                <div class="qb-section">
                    <h3>üîç WHERE Clauses</h3>
                    <div id="where-clauses"></div>
                    <button class="add-btn" onclick="addWhereClause()">+ Add WHERE Clause</button>
                </div>
                
                <div class="qb-section">
                    <h3>üìã SELECT Fields</h3>
                    <div class="checkbox-container" id="select-fields">
                        <label class="checkbox-label">
                            <input type="checkbox" value="id" checked> id
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="name" checked> name
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="age" checked> age
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="email" checked> email
                        </label>
                    </div>
                </div>
                
                <div class="qb-section">
                    <h3>‚¨ÜÔ∏è ORDER BY</h3>
                    <div class="qb-row">
                        <select class="qb-select" id="orderby-field">
                            <option value="">None</option>
                            <option value="id">id</option>
                            <option value="name">name</option>
                            <option value="age">age</option>
                            <option value="email">email</option>
                        </select>
                        <select class="qb-select" id="orderby-direction">
                            <option value="asc">Ascending</option>
                            <option value="desc">Descending</option>
                        </select>
                    </div>
                </div>
                
                <div class="qb-section">
                    <h3>üìÑ LIMIT / OFFSET</h3>
                    <div class="qb-row">
                        <input type="number" class="qb-input" id="limit" placeholder="Limit (e.g., 10)" min="0">
                        <input type="number" class="qb-input" id="offset" placeholder="Offset (e.g., 0)" min="0" value="0">
                    </div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="executeQuery()">‚ñ∂Ô∏è Execute Query</button>
                    <button class="btn btn-secondary" onclick="copyToEditor()">üìù Copy to Editor</button>
                </div>
                
                <div class="generated-code" id="generated-query">// Your query will appear here...</div>
            </div>
            
            <div class="editor-container" style="margin-top: 20px;">
                <div class="editor-header">Query Results</div>
                <div id="builder-output" class="output-panel">Execute a query to see results...</div>
            </div>
        </div>
        
        <!-- Examples Tab -->
        <div id="examples-tab" class="tab-content">
            <div class="examples" id="examples-container"></div>
        </div>
    </div>
    
    <script>
        // Mock Skinny Ecto implementation for browser
        class Field {
            constructor(name, fieldType, primaryKey, nullable) {
                this.name = name;
                this.fieldType = fieldType;
                this.primaryKey = primaryKey;
                this.nullable = nullable;
            }
            
            get description() {
                const pk = this.primaryKey ? " (PK)" : "";
                const nul = this.nullable ? " (nullable)" : "";
                return `${this.name}: ${this.fieldType}${pk}${nul}`;
            }
        }
        
        function field(name, fieldType, pk, nullable) {
            return new Field(name, fieldType, pk, nullable);
        }
        
        class Schema {
            constructor(tableName, fields) {
                this.tableName = tableName;
                const idField = new Field("id", "Int", true, false);
                this.fields = [idField, ...fields];
            }
            
            hasField(name) {
                return this.fields.some(f => f.name === name);
            }
            
            getField(name) {
                return this.fields.find(f => f.name === name);
            }
        }
        
        function schema(tableName, fields) {
            return new Schema(tableName, fields);
        }
        
        class Record {
            constructor(data) {
                this.data = data;
            }
            
            get(field) {
                return this.data[field];
            }
            
            getOr(field, fallback) {
                return this.data[field] || fallback;
            }
            
            describe() {
                return Object.entries(this.data)
                    .map(([k, v]) => `${k}: ${v}`)
                    .join(", ");
            }
        }
        
        class InMemoryStore {
            constructor() {
                this.tables = {};
                this.nextIds = {};
            }
            
            insert(tableName, data) {
                if (!this.tables[tableName]) {
                    this.tables[tableName] = [];
                    this.nextIds[tableName] = 1;
                }
                
                const id = this.nextIds[tableName]++;
                const record = new Record({ id: id.toString(), ...data });
                this.tables[tableName].push(record);
                return record;
            }
            
            all(tableName) {
                return this.tables[tableName] || [];
            }
        }
        
        class Query {
            constructor(schema, store) {
                this.schema = schema;
                this.store = store;
                this.whereClauses = [];
                this.selectFields = [];
                this.orderByClauses = [];
                this.limitValue = -1;
                this.offsetValue = 0;
            }
            
            where(field, operator, value) {
                this.whereClauses.push({ field, operator, value });
                return this;
            }
            
            select(fields) {
                this.selectFields = fields;
                return this;
            }
            
            orderBy(field, direction) {
                this.orderByClauses.push({ field, direction });
                return this;
            }
            
            limit(n) {
                this.limitValue = n;
                return this;
            }
            
            offset(n) {
                this.offsetValue = n;
                return this;
            }
            
            matchesWhere(record) {
                for (let clause of this.whereClauses) {
                    const recVal = record.getOr(clause.field, "");
                    const fieldInfo = this.schema.getField(clause.field);
                    
                    let matches = false;
                    if (fieldInfo.fieldType === "Int") {
                        const rv = parseInt(recVal) || 0;
                        const cv = parseInt(clause.value) || 0;
                        switch (clause.operator) {
                            case "==": matches = rv === cv; break;
                            case "!=": matches = rv !== cv; break;
                            case ">": matches = rv > cv; break;
                            case "<": matches = rv < cv; break;
                            case ">=": matches = rv >= cv; break;
                            case "<=": matches = rv <= cv; break;
                        }
                    } else {
                        switch (clause.operator) {
                            case "==": matches = recVal === clause.value; break;
                            case "!=": matches = recVal !== clause.value; break;
                            case ">": matches = recVal > clause.value; break;
                            case "<": matches = recVal < clause.value; break;
                            case ">=": matches = recVal >= clause.value; break;
                            case "<=": matches = recVal <= clause.value; break;
                        }
                    }
                    
                    if (!matches) return false;
                }
                return true;
            }
            
            compareRecords(a, b) {
                for (let clause of this.orderByClauses) {
                    const aVal = a.getOr(clause.field, "");
                    const bVal = b.getOr(clause.field, "");
                    const fieldInfo = this.schema.getField(clause.field);
                    
                    let cmp = 0;
                    if (fieldInfo.fieldType === "Int") {
                        const aInt = parseInt(aVal) || 0;
                        const bInt = parseInt(bVal) || 0;
                        cmp = aInt - bInt;
                    } else {
                        cmp = aVal < bVal ? -1 : aVal > bVal ? 1 : 0;
                    }
                    
                    if (cmp !== 0) {
                        return clause.direction === "desc" ? -cmp : cmp;
                    }
                }
                return 0;
            }
            
            all() {
                let results = this.store.all(this.schema.tableName);
                
                // Filter
                results = results.filter(r => this.matchesWhere(r));
                
                // Sort
                if (this.orderByClauses.length > 0) {
                    results = [...results].sort((a, b) => this.compareRecords(a, b));
                }
                
                // Slice
                if (this.limitValue > 0) {
                    results = results.slice(this.offsetValue, this.offsetValue + this.limitValue);
                } else if (this.offsetValue > 0) {
                    results = results.slice(this.offsetValue);
                }
                
                // Project
                if (this.selectFields.length > 0) {
                    results = results.map(r => {
                        const projected = {};
                        for (let field of this.selectFields) {
                            projected[field] = r.getOr(field, "");
                        }
                        return new Record(projected);
                    });
                }
                
                return results;
            }
        }
        
        let outputBuffer = [];
        function print(msg) {
            outputBuffer.push(msg);
        }
        
        function runCode() {
            const code = document.getElementById('code-editor').value;
            const output = document.getElementById('output');
            outputBuffer = [];
            
            try {
                // Execute the code
                eval(code);
                
                output.textContent = outputBuffer.join('\n');
                output.style.color = '#27ae60';
            } catch (error) {
                output.textContent = `Error: ${error.message}\n\n${error.stack}`;
                output.style.color = '#e74c3c';
            }
        }
        
        function clearOutput() {
            document.getElementById('output').textContent = 'Output cleared.';
            document.getElementById('output').style.color = '#d4d4d4';
        }
        
        const DEFAULT_CODE = document.getElementById('code-editor').value;
        
        function resetCode() {
            document.getElementById('code-editor').value = DEFAULT_CODE;
            clearOutput();
        }
        
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tab + '-tab').classList.add('active');
        }
        
        // Query Builder
        let whereClauseCount = 0;
        
        function addWhereClause() {
            const container = document.getElementById('where-clauses');
            const id = whereClauseCount++;
            
            const div = document.createElement('div');
            div.className = 'where-clause';
            div.id = `where-${id}`;
            div.innerHTML = `
                <div class="qb-row">
                    <select class="qb-select">
                        <option value="id">id</option>
                        <option value="name">name</option>
                        <option value="age">age</option>
                        <option value="email">email</option>
                    </select>
                    <select class="qb-select">
                        <option value="==">=</option>
                        <option value="!=">!=</option>
                        <option value=">">&gt;</option>
                        <option value="<">&lt;</option>
                        <option value=">=">&gt;=</option>
                        <option value="<=">&lt;=</option>
                    </select>
                    <input type="text" class="qb-input" placeholder="Value">
                    <button class="remove-btn" onclick="removeWhereClause(${id})">‚úï</button>
                </div>
            `;
            container.appendChild(div);
            updateGeneratedQuery();
        }
        
        function removeWhereClause(id) {
            document.getElementById(`where-${id}`).remove();
            updateGeneratedQuery();
        }
        
        function getWhereClauses() {
            const clauses = [];
            document.querySelectorAll('.where-clause').forEach(clause => {
                const selects = clause.querySelectorAll('select');
                const input = clause.querySelector('input');
                clauses.push({
                    field: selects[0].value,
                    operator: selects[1].value,
                    value: input.value
                });
            });
            return clauses;
        }
        
        function getSelectedFields() {
            const fields = [];
            document.querySelectorAll('#select-fields input:checked').forEach(cb => {
                fields.push(cb.value);
            });
            return fields;
        }
        
        function updateGeneratedQuery() {
            let code = 'let results = new Query(userSchema, store)\n';
            
            const whereClauses = getWhereClauses();
            whereClauses.forEach(w => {
                if (w.value) {
                    code += `  .where("${w.field}", "${w.operator}", "${w.value}")\n`;
                }
            });
            
            const selectedFields = getSelectedFields();
            if (selectedFields.length > 0 && selectedFields.length < 4) {
                code += `  .select([${selectedFields.map(f => `"${f}"`).join(', ')}])\n`;
            }
            
            const orderField = document.getElementById('orderby-field').value;
            if (orderField) {
                const direction = document.getElementById('orderby-direction').value;
                code += `  .orderBy("${orderField}", "${direction}")\n`;
            }
            
            const limit = document.getElementById('limit').value;
            const offset = document.getElementById('offset').value;
            if (offset && offset !== '0') {
                code += `  .offset(${offset})\n`;
            }
            if (limit) {
                code += `  .limit(${limit})\n`;
            }
            
            code += '  .all();';
            
            document.getElementById('generated-query').textContent = code;
        }
        
        // Add event listeners for query builder
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('#select-fields input').forEach(cb => {
                cb.addEventListener('change', updateGeneratedQuery);
            });
            
            document.getElementById('orderby-field').addEventListener('change', updateGeneratedQuery);
            document.getElementById('orderby-direction').addEventListener('change', updateGeneratedQuery);
            document.getElementById('limit').addEventListener('input', updateGeneratedQuery);
            document.getElementById('offset').addEventListener('input', updateGeneratedQuery);
            
            updateGeneratedQuery();
            loadExamples();
        });
        
        function executeQuery() {
            const code = `
// Setup (same as editor)
let userFields = [
  field("name", "String", false, false),
  field("age", "Int", false, false),
  field("email", "String", false, true)
];
let userSchema = schema("users", userFields);
let store = new InMemoryStore();

store.insert("users", { name: "Alice", age: "25", email: "alice@example.com" });
store.insert("users", { name: "Bob", age: "30", email: "bob@example.com" });
store.insert("users", { name: "Charlie", age: "17", email: "charlie@example.com" });

// Your query
${document.getElementById('generated-query').textContent}

// Display results
print("Query Results:");
print("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê");
if (results.length === 0) {
    print("No results found.");
} else {
    for (let user of results) {
        print("  " + user.describe());
    }
    print("");
    print(\`Total: \${results.length} record(s)\`);
}
            `;
            
            const output = document.getElementById('builder-output');
            outputBuffer = [];
            
            try {
                eval(code);
                output.textContent = outputBuffer.join('\n');
                output.style.color = '#27ae60';
            } catch (error) {
                output.textContent = `Error: ${error.message}`;
                output.style.color = '#e74c3c';
            }
        }
        
        function copyToEditor() {
            const fullCode = `// Define schema
let userFields = [
  field("name", "String", false, false),
  field("age", "Int", false, false),
  field("email", "String", false, true)
];
let userSchema = schema("users", userFields);

// Create store and add data
let store = new InMemoryStore();

store.insert("users", { name: "Alice", age: "25", email: "alice@example.com" });
store.insert("users", { name: "Bob", age: "30", email: "bob@example.com" });
store.insert("users", { name: "Charlie", age: "17", email: "charlie@example.com" });

// Query built from query builder
${document.getElementById('generated-query').textContent}

// Display results
print("Query Results:");
for (let user of results) {
    print("  " + user.describe());
}`;
            
            document.getElementById('code-editor').value = fullCode;
            switchTab('code');
            document.querySelector('.tab').click();
        }
        
        function loadExamples() {
            const examples = [
                {
                    title: "Get All Users",
                    description: "Retrieve all records without filtering",
                    code: `new Query(userSchema, store).all()`
                },
                {
                    title: "Filter Adults",
                    description: "WHERE age >= 18",
                    code: `new Query(userSchema, store)
  .where("age", ">=", "18")
  .all()`
                },
                {
                    title: "Sort by Age",
                    description: "ORDER BY age DESC",
                    code: `new Query(userSchema, store)
  .orderBy("age", "desc")
  .all()`
                },
                {
                    title: "Projection",
                    description: "SELECT only name and email",
                    code: `new Query(userSchema, store)
  .select(["name", "email"])
  .all()`
                },
                {
                    title: "Pagination",
                    description: "LIMIT 2 OFFSET 1",
                    code: `new Query(userSchema, store)
  .orderBy("id", "asc")
  .offset(1)
  .limit(2)
  .all()`
                },
                {
                    title: "Complex Query",
                    description: "Multiple conditions with sorting",
                    code: `new Query(userSchema, store)
  .where("age", ">=", "18")
  .where("email", "!=", "")
  .orderBy("age", "desc")
  .select(["name", "age"])
  .limit(5)
  .all()`
                },
                {
                    title: "Find Oldest",
                    description: "Get the oldest user",
                    code: `new Query(userSchema, store)
  .orderBy("age", "desc")
  .limit(1)
  .all()`
                },
                {
                    title: "Young Adults",
                    description: "Age between 18 and 30",
                    code: `new Query(userSchema, store)
  .where("age", ">=", "18")
  .where("age", "<", "30")
  .all()`
                }
            ];
            
            const container = document.getElementById('examples-container');
            container.innerHTML = examples.map(ex => `
                <div class="example-card" onclick='loadExample(\`${ex.code.replace(/`/g, '\\`')}\`)'>
                    <h4>${ex.title}</h4>
                    <p>${ex.description}</p>
                    <div class="example-code">${ex.code.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</div>
                </div>
            `).join('');
        }
        
        function loadExample(code) {
            const fullCode = `// Define schema
let userFields = [
  field("name", "String", false, false),
  field("age", "Int", false, false),
  field("email", "String", false, true)
];
let userSchema = schema("users", userFields);

// Create store and add data
let store = new InMemoryStore();

store.insert("users", { name: "Alice", age: "25", email: "alice@example.com" });
store.insert("users", { name: "Bob", age: "30", email: "bob@example.com" });
store.insert("users", { name: "Charlie", age: "17", email: "charlie@example.com" });

// Execute query
let results = ${code};

// Display results
print("Query Results:");
for (let user of results) {
    print("  " + user.describe());
}`;
            
            document.getElementById('code-editor').value = fullCode;
            switchTab('code');
            document.querySelector('.tab').click();
        }
    </script>
</body>
</html>
